{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\ProjetoIntegrador\\\\frontend\\\\src\\\\pages\\\\Profile\\\\index.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FiPower, FiSearch, FiUser, FiPlus } from 'react-icons/fi';\nimport './styles.css';\nimport axios from 'axios';\nimport logoImg from '../../assets/splash.png';\nimport localStorageService from '../../service/localStorageService';\nimport EventList from '../../components/eventList';\nimport AuthService from '../../service/authService';\nimport EventService from '../../service/eventService';\nimport { Dialog } from 'primereact/dialog';\nimport { Button } from 'primereact/button';\nimport { messageError, messageSuccess, messageWarning } from '../../components/toastr';\n\nconst logout = () => {\n  AuthService.removeUserAuthenticate();\n};\n\nclass Profile extends React.Component {\n  user() {\n    const emailUser = localStorageService.getlocalStorage('_user');\n    return emailUser.name;\n  }\n\n  constructor() {\n    super();\n    this.state = {\n      name: '',\n      events: [],\n      showConfirmDialog: false,\n      tickets: {},\n      amout: ''\n    };\n\n    this.openDialog = ticket => {\n      this.setState({\n        showConfirmDialog: true,\n        tickets: ticket\n      });\n    };\n\n    this.findAllEvents = () => {\n      const eventFilter = {\n        name: this.state.name\n      };\n      this.service.findAll(eventFilter).then(response => {\n        this.setState({\n          events: response.data\n        });\n      }).catch(error => {\n        console.log(error.response);\n      });\n    };\n\n    this.orders = () => {\n      const msgs = this.validar();\n\n      if (msgs && msgs.length > 0) {\n        msgs.forEach((msg, index) => {\n          messageError(msg);\n        });\n        return false;\n      }\n\n      const user = localStorageService.getlocalStorage('_user');\n      var userId = user.id;\n      axios.post('http://localhost:8080/orders/', {\n        user: userId,\n        event: this.state.tickets.id,\n        amout: this.state.amout\n      }).then(response => {\n        axios.get(`http://localhost:8080/users/${userId}`).then(response => {\n          localStorageService.addItem('_user', response.data);\n        });\n        this.props.history.push('/profile');\n        messageSuccess(\"Ingresso Adquirido..\");\n        this.setState({\n          showConfirmDialog: false\n        });\n      }).catch(erro => {\n        messageWarning(erro.response.data.message);\n        this.setState({\n          showConfirmDialog: false\n        });\n      });\n    };\n\n    this.cancelOrders = () => {\n      this.setState({\n        showConfirmDialog: false\n      });\n    };\n\n    this.service = new EventService();\n  }\n\n  validar() {\n    const msgs = [];\n\n    if (!this.state.amout) {\n      msgs.push('O campo Quantidade é Obrigatório.');\n    }\n\n    return msgs;\n  }\n\n  render() {\n    const confirmDialog = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-controll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      label: \"Confirmar\",\n      className: \"btn btn-success\",\n      icon: \"pi pi-check\",\n      onClick: this.orders,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      label: \"Cancelar\",\n      className: \"btn btn-danger\",\n      icon: \"pi pi-times\",\n      onClick: this.cancelOrders,\n      style: {\n        background: ''\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logoImg,\n      alt: \"logon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      className: \"form-control\",\n      id: \"nameFilter\",\n      placeholder: \"Digite o nome do Evento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      className: \"back-link\",\n      onClick: this.findAllEvents,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FiSearch, {\n      size: 16,\n      color: \"#7159c1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(Link, {\n      className: \"teste\",\n      to: \"/\",\n      onClick: logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FiPower, {\n      size: 20,\n      color: \"#fff\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 37\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"back-link\",\n      to: \"/perfil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FiUser, {\n      size: 30,\n      color: \"#7159c1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }), \"Perfil\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"back-link\",\n      to: \"/event/new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FiPlus, {\n      size: 30,\n      color: \"#7159c1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }), \"Novo evento\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"intro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"bem-vindo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, \"Bem vindo...\"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"nome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 81\n      }\n    }, this.user()))))), /*#__PURE__*/React.createElement(EventList, {\n      eventos: this.state.events,\n      order: this.openDialog,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"get-ticket\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Dialog, {\n      className: \"title aling-center\",\n      header: \"Adquirir Ingresso em Evento\",\n      visible: this.state.showConfirmDialog,\n      style: {\n        width: '50vw'\n      },\n      footer: confirmDialog,\n      modal: true,\n      onHide: () => this.setState({\n        showConfirmDialog: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title aling-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 29\n      }\n    }, this.state.tickets.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 32\n      }\n    }, \"Data Inicial : \"), \" \", this.state.tickets.initialData, \" \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 98\n      }\n    }, \" Data Final : \"), \" \", this.state.tickets.finalData), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 52\n      }\n    }, \" R$ : \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 75\n      }\n    }, \" \", this.state.tickets.price, \" \")), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"amout\",\n      value: this.state.amout,\n      onChange: e => this.setState({\n        amout: e.target.value\n      }),\n      placeholder: \"Quantidade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"card-title aling-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 29\n      }\n    }, \"Aten\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    }, \"Ap\\xF3s clicar em confirmar e ocorrer tudo certo com a compra do ingresso. Ser\\xE1 enviado um email para voc\\xEA com os dados do evento e quem voc\\xEA deve contatar para confirmar a compra.\")))));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:/Projects/ProjetoIntegrador/frontend/src/pages/Profile/index.js"],"names":["React","Link","FiPower","FiSearch","FiUser","FiPlus","axios","logoImg","localStorageService","EventList","AuthService","EventService","Dialog","Button","messageError","messageSuccess","messageWarning","logout","removeUserAuthenticate","Profile","Component","user","emailUser","getlocalStorage","name","constructor","state","events","showConfirmDialog","tickets","amout","openDialog","ticket","setState","findAllEvents","eventFilter","service","findAll","then","response","data","catch","error","console","log","orders","msgs","validar","length","forEach","msg","index","userId","id","post","event","get","addItem","props","history","push","erro","message","cancelOrders","render","confirmDialog","background","e","target","value","width","initialData","finalData","price"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FiPower, FiSearch, FiUser, FiPlus } from 'react-icons/fi';\n\nimport './styles.css';\nimport axios from 'axios'\n\nimport logoImg from '../../assets/splash.png';\nimport localStorageService from '../../service/localStorageService';\nimport EventList from '../../components/eventList';\nimport AuthService from '../../service/authService'\nimport EventService from '../../service/eventService';\n\nimport { Dialog } from 'primereact/dialog';\nimport { Button } from 'primereact/button';\n\nimport { messageError, messageSuccess, messageWarning } from '../../components/toastr';\n\nconst logout = () => {\n    AuthService.removeUserAuthenticate();\n}\n\nclass Profile extends React.Component {\n\n    user() {\n        const emailUser = localStorageService.getlocalStorage('_user')\n        return emailUser.name;\n    }\n\n    constructor() {\n        super();\n        this.service = new EventService();\n    }\n\n    state = {\n        name: '',\n        events: [],\n        showConfirmDialog: false,\n        tickets: {},\n        amout: ''\n    }\n\n    openDialog = (ticket) => {\n        this.setState({ showConfirmDialog: true, tickets: ticket })\n    }\n\n    findAllEvents = () => {\n\n        const eventFilter = {\n            name: this.state.name\n        }\n\n        this.service.findAll(eventFilter).then(response => {\n            this.setState({ events: response.data })\n        }).catch(error => {\n            console.log(error.response)\n        })\n    }\n\n    validar() {\n        const msgs = [];\n\n        if (!this.state.amout) {\n            msgs.push('O campo Quantidade é Obrigatório.')\n        }\n\n        return msgs;\n    }\n\n    orders = () => {\n\n        const msgs = this.validar();\n        if (msgs && msgs.length > 0) {\n            msgs.forEach((msg, index) => {\n                messageError(msg);\n            })\n\n            return false;\n        }\n\n        const user = localStorageService.getlocalStorage('_user')\n        var userId = user.id;\n\n        axios.post('http://localhost:8080/orders/', {\n\n            user: userId,\n            event: this.state.tickets.id,\n            amout: this.state.amout\n\n        }).then(response => {\n\n            axios.get(`http://localhost:8080/users/${userId}`).then(response => {\n                localStorageService.addItem('_user', response.data);\n            })\n            \n            this.props.history.push('/profile')\n            messageSuccess(\"Ingresso Adquirido..\")\n            this.setState({ showConfirmDialog: false });\n\n        }).catch(erro => {\n            messageWarning(erro.response.data.message)\n            this.setState({ showConfirmDialog: false })\n        })\n    }\n\n    cancelOrders = () => {\n        this.setState({ showConfirmDialog: false })\n    }\n\n    render() {\n\n        const confirmDialog = (\n            <div className=\"btn-controll\">\n                <Button type=\"button\" label=\"Confirmar\" className=\"btn btn-success\" icon=\"pi pi-check\" onClick={this.orders} />\n                <Button type=\"button\" label=\"Cancelar\" className=\"btn btn-danger\" icon=\"pi pi-times\" onClick={this.cancelOrders}  style={ {background: ''} } />\n            </div>\n        )\n\n        return (\n            <>\n            <div className=\"menu\">\n                <img src={logoImg} alt=\"logon\" />\n                    <div className=\"col-md-12\">\n                        <form className=\"margin\">\n                            <input type=\"text\" value={this.state.name} onChange={e => this.setState({ name: e.target.value })} className=\"form-control\" id=\"nameFilter\" placeholder=\"Digite o nome do Evento\" />\n                            <Link className=\"back-link\" onClick={this.findAllEvents}>\n                                <div className=\"link\">\n                                    <FiSearch size={16} color=\"#7159c1\" />\n                                </div>\n                            </Link>\n                            <Link className=\"teste\" to=\"/\" onClick={logout}>\n                                    <FiPower size={20} color=\"#fff\" />\n                            </Link>\n                        </form>\n                    </div>\n                </div>\n                <div className=\"body\">\n                    <ul>\n                        <li><Link className=\"back-link\" to=\"/perfil\" >\n                            <FiUser size={30} color=\"#7159c1\" />Perfil\n                        </Link></li>\n                        <li><Link className=\"back-link\" to=\"/event/new\" >\n                            <FiPlus size={30} color=\"#7159c1\" />Novo evento\n                        </Link></li>\n                    </ul>\n                </div>\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-md-6\">\n                            <div className=\"profile-container\">\n                                <header className=\"intro\">\n                                <span className=\"bem-vindo\">Bem vindo...</span> <span className=\"nome\" >{this.user()}</span>\n                                </header>\n                            </div>\n                        </div>\n                    </div>\n                    <EventList eventos={this.state.events}\n                        order={this.openDialog} />\n                    <br>\n                    </br>\n                </div >\n                <div className=\"get-ticket\">\n                    <Dialog className=\"title aling-center\" header=\"Adquirir Ingresso em Evento\"\n                        visible={this.state.showConfirmDialog}\n                        style={{ width: '50vw' }}\n                        footer={confirmDialog}\n                        modal={true} onHide={() => this.setState({ showConfirmDialog: false })}>\n                        <div className=\"card\">\n                            <h4 className=\"card-title aling-center\">{this.state.tickets.name}</h4>\n                            <p><strong>Data Inicial : </strong> {this.state.tickets.initialData} <strong> Data Final : </strong> {this.state.tickets.finalData}</p>\n                            <div className=\"price\"><strong> R$ : </strong><span> {this.state.tickets.price} </span></div>\n                            <input id=\"amout\" value={this.state.amout} onChange={e => this.setState({ amout: e.target.value })} placeholder=\"Quantidade\" />\n                            <h5 className=\"card-title aling-center\" >Atenção</h5>\n                            <p>Após clicar em confirmar e ocorrer tudo certo com a compra do ingresso. Será enviado um email para você com os dados do evento e quem você deve contatar para confirmar a compra.</p>\n                            </div>\n                    </Dialog>\n                </div>\n\n            </>\n        )\n    }\n}\n\nexport default Profile "]},"metadata":{},"sourceType":"module"}